<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="../../examples/css/validatorCss.css" type="text/css" />
        <script type="text/javascript" src="http://yui.yahooapis.com/3.0.0b1/build/yui/yui-min.js"></script>
        <script type="text/javascript" src="../../jsbuild/gallery-formvalidator-min.js"></script>

        <!-- Using YUI 2 ONLY for the post -->
        <script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/yahoo/yahoo-min.js"></script>
        <script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/dom/dom.js"></script>
        <script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
        <script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/get/get.js"></script>
        <script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/connection/connection.js"></script>


        <script type="text/javascript">
            YUI().use(
            'gallery-formvalidator',
            function(Y){
                Y.on("domready", function () {
                    var myAjaxObj = {
                        doAjax:false
                    }
                    var form = new Y.Validator(
                        {
                            form:'basicExample',
                            onSubmit:function(){
                                // this will only get called if the form is valid.
                                this.doAjax = confirm('Okay = Ajax Post, Cancel = Normal Post');
                                return !this.doAjax;
                            },
                            onSubmitScope:myAjaxObj,
                            fieldJSON:[
                                {
                                    type:Y.TextBaseField,
                                    atts:{
                                        inputDOM:'firstName',
                                        correctIndicator:'firstNameIndicator',
                                        incorrectIndicator:'firstNameValidator'
                                    }
                                },
                                {
                                    type:Y.TextBaseField,
                                    atts:{
                                        inputDOM:'lastName',
                                        correctIndicator:'lastNameIndicator',
                                        incorrectIndicator:'lastNameValidator'
                                    }
                                },
                                {
                                    type:Y.DoubleField,
                                    atts:{
                                        inputDOM:'income',
                                        correctIndicator:'incomeIndicator',
                                        incorrectIndicator:'incomeValidator',
                                        max:40000.00,
                                        maxDecimalPlaces:2
                                    }
                                },
                                {
                                    type:Y.IntegerField,
                                    atts:{
                                        inputDOM:'age',
                                        correctIndicator:'ageIndicator',
                                        incorrectIndicator:'ageValidator',
                                        max:100,
                                        min:10
                                    }
                                },
                                {
                                    type:Y.SelectField,
                                    atts:{
                                        inputDOM:'pet',
                                        correctIndicator:'petIndicator',
                                        incorrectIndicator:'petValidator'
                                    }
                                },
                                {
                                    type:Y.SelectField,
                                    atts:{
                                        inputDOM:'vehicle',
                                        emptyValue:'none',
                                        correctIndicator:'vehicleIndicator',
                                        incorrectIndicator:'vehicleValidator'
                                    }
                                }
                            ]
                        }
                    );
                    form.on('form:onsubmit',function(){
                        if (this.doAjax) doAjaxPost();
                    },myAjaxObj);
                    Y.Event.attach('click',function(){form.clear();},'#clearButton');
                });
            });
            function doAjaxPost(){
                var formData = YAHOO.util.Connect.setForm(document.getElementById('basicExample'));
                var callback = {
                    success:ajaxCallback
                }
                alert('Sending ' + formData);
                YAHOO.util.Connect.asyncRequest('POST', 'formPost.html', callback);
            }

            function ajaxCallback(response){
                alert('Result of Post\r\n' + response.responseText);
            }
        </script>
    </head>
    <body>
        <div class="mainContainer">
            <form id="basicExample" action="formPost.html">
                <div class="formBody">
                    <h2>Before Submit Example</h2>
                    <div class="info">
                        This will show how you can use the before submit function, and the onSubmit
                        event to prevent the form validator from posting the form, and instead using
                        an ajax call instead.
                    </div>
                    <div class="row">
                        <div class="column1Backing"></div>
                        <div class="column2Backing"></div>
                        <div class="label">First Name:</div>
                        <div class="value">
                            <div id="firstNameValidator" class="validator">
                                <span class="validator">&nbsp;</span>
                            </div>
                            <div id="firstNameIndicator" class="indicator" style="display:none;">
                                <span class="indicator">&nbsp;</span>
                            </div>
                            <input id="firstName" name="firstName" type="text" />
                        </div>
                        <div class="label">Last Name:</div>
                        <div class="value">
                            <div id="lastNameValidator" class="validator">
                                <span class="validator">&nbsp;</span>
                            </div>
                            <div id="lastNameIndicator" class="indicator" style="display:none;">
                                <span class="indicator">&nbsp;</span>
                            </div>
                            <input id="lastName" name="lastName" type="text" />
                        </div>
                        <div class="clearDiv"></div>
                    </div>
                    <div class="row">
                        <div class="column1Backing"></div>
                        <div class="column2Backing"></div>
                        <div class="label">Age:</div>
                        <div class="value">
                            <div id="ageValidator" class="validator">
                                <span class="validator">&nbsp;</span>
                            </div>
                            <div id="ageIndicator" class="indicator" style="display:none;">
                                <span class="indicator">&nbsp;</span>
                            </div>
                            <div class="innerValue">
                                <input id="age" name="age" type="text" />
                            </div>
                        </div>
                        <div class="label">Income ($):</div>
                        <div class="value">
                            <div id="incomeValidator" class="validator">
                                <span class="validator">&nbsp;</span>
                            </div>
                            <div id="incomeIndicator" class="indicator" style="display:none;">
                                <span class="indicator">&nbsp;</span>
                            </div>
                            <div class="innerValue">
                                <input id="income" name="income" type="text" />
                            </div>
                        </div>
                        <div class="clearDiv"></div>
                    </div>
                    <div class="row">
                        <div class="column1Backing"></div>
                        <div class="column2Backing"></div>
                        <div class="label">Pet:</div>
                        <div class="value">
                            <div id="petValidator" class="validator">
                                <span class="validator">&nbsp;</span>
                            </div>
                            <div id="petIndicator" class="indicator" style="display:none;">
                                <span class="indicator">&nbsp;</span>
                            </div>
                            <div class="innerValue">
                                <select name="pet" id="pet">
                                    <option value="">-- Select a option --</option>
                                    <option value="None">No Pet</option>
                                    <option value="Dog">Dog</option>
                                    <option value="Cat">Cat</option>
                                    <option value="Bird">Bird</option>
                                </select>
                            </div>
                        </div>
                        <div class="label">Vehicle:</div>
                        <div class="value">
                            <div id="vehicleValidator" class="validator">
                                <span class="validator">&nbsp;</span>
                            </div>
                            <div id="vehicleIndicator" class="indicator" style="display:none;">
                                <span class="indicator">&nbsp;</span>
                            </div>
                            <div class="innerValue">
                                <select name="vehicle" id="vehicle">
                                    <option value="none">-- Select a option --</option>
                                    <option value="car">Car</option>
                                    <option value="truck">Truck</option>
                                    <option value="horse">Horse</option>
                                </select>
                            </div>
                        </div>
                        <div class="clearDiv"></div>
                    </div>
                    <div class="buttonRow">
                        <input type="submit" class="button" value="Save" />
                        <input type="button" id="clearButton" class="button" value="Clear" />
                        <input type="reset" class="button" value="Reset" />
                        <input type="button" class="button" value="Cancel" />
                    </div>
                </div>
            </form>
        </div>
    </body>
</html>
